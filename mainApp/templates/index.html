{% extends "theme.html" %} 
{%load static%}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}




{% block "bodyOfPage" %}
<!-- Banner -->
<div class="search_container_block home_main_search_part main_search_block" data-background-image="/static/images/city_search_background.jpg">
  <div class="main_inner_search_block">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h2>{% trans "Find your Nearby" %} <span class="typed-words"></span></h2>
          <h4>{% trans "Find some of the best tips from around the city from our partners and friends." %}</h4>
          <div class="main_input_search_part">
            <div class="main_input_search_part_item">
              <input type="text" id="searchInputMhnaty" placeholder='{% trans "Search For Your Services" %}' value=""/>
            </div>
            <div class="main_input_search_part_item intro-search-field">
              <select id="dropdownMenuLink" class="selectpicker default categoryElementSelect" categoryId="" data-live-search="true"  data-selected-text-format="count" data-size="5" title='{% trans "Services" %}''>
                        {% for item in allMainCategories %}
                        <option value="{{item.id}}">{{item.name}}</option>
                        {% endfor %}
              </select>
            </div>



            <div class="main_input_search_part_item intro-search-field">
              <select id="category" class="selectpicker default category" categoryId="" data-live-search="true"  data-selected-text-format="count" data-size="5" title='{% trans "Sub Categories" %}''>
                       
              </select>
            </div>

            <div class="main_input_search_part_item intro-search-field">
              <select id="listOfcities" data-placeholder='{% trans "City" %}'  class="selectpicker default" title='{% trans "City" %}' data-live-search="true" data-selected-text-format="count" data-size="5">
               
              </select>
            </div>


            <div class="main_input_search_part_item intro-search-field">
              <select id="listOfregions" data-placeholder='{% trans "Region" %}'  class="selectpicker default" title='{% trans "Region" %}' data-live-search="true" data-selected-text-format="count" data-size="5">
               
              </select>
            </div>


            <button class="button" onclick="goToSearchPage('{{LANGUAGE_CODE}}')">{% trans "Search" %}</button>
          </div>
    <div class="main_popular_categories">
      <h3>{% trans "Or Browse Popular Categories" %}</h3>	
            <ul class="main_popular_categories_list">
      <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Chef-Hat" aria-hidden="true"></i>
                  <p>{% trans "Restaurant" %}</p>					
                </div>
                </a> 
      </li>
              <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Dumbbell" aria-hidden="true"></i>
                  <p>{% trans "Fitness" %}</p>
                </div>
                </a> 
      </li>
              <!-- <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Electric-Guitar" aria-hidden="true"></i>
                  <p>{% trans "Events" %}</p>
                </div>
                </a> 
      </li>
              <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Hotel" aria-hidden="true"></i>
                  <p>{% trans "Hotels" %}</p>
                </div>
                </a> 
      </li>                 -->
              <!-- <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Home-2" aria-hidden="true"></i>
                  <p>{% trans "Real Estate" %}</p>
                </div>
                </a> 
      </li>
      <li> <a href="#">
                <div class="utf_box"> <i class="im im-icon-Business-Man" aria-hidden="true"></i>
                  <p>{% trans "Business" %}</p>
                </div>
                </a> 
      </li> -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
  



<div class="container padding-bottom-70">
  <div class="row">
    <div class="col-md-12">
      <h3 class="headline_part centered margin-bottom-35 margin-top-70"> {% trans "Our Services" %} <span></span></h3>
    </div>

    {% for item in allMainCategories%}
    <div class="col-md-4"> 
       <a href="/{{LANGUAGE_CODE}}/SearchPage/?category={{item.id}}&provider=&city=&region=" class="img-box" data-background-image="{{item.image}}">
    <div class="utf_img_content_box visible">
      <h4>{{item.name}} </h4>
      <!-- <span>18 Listings</span>  -->
    </div>
       </a> 
  </div>
    {% endfor %}

  <div class="col-md-12 centered_content"> <a href="/{{LANGUAGE_CODE}}/SearchPage/?category={{item.id}}&provider=&city=&region=" class="button border margin-top-20">{% trans "Read More" %}</a> </div>
  </div>
</div>


<div class="clearfix"></div>







<section class="fullwidth_block padding-top-75 padding-bottom-70" data-background-color="#f9f9f9">
  <div class="container">
    <div class="row slick_carousel_slider">
      <div class="col-md-12">
        <h3 class="headline_part centered margin-bottom-45"> {% trans "Most Visited Places" %} <span>{% trans "Explore the greates places in the city" %}</span> </h3>
      </div>
  
  <div class="row">
    <div class="col-md-12">
      <div class="simple_slick_carousel_block utf_dots_nav" id="add_mostViewed"> 
       
               {% for item in mostViewed %}
                  <div class="utf_carousel_item"> <a href="/{{LANGUAGE_CODE}}/CompanyPage/?id={{item.id}}" class="utf_listing_item-container compact">
        <div class="utf_listing_item"> <img src="{{item.mainImage.url}}" alt=""> <span class="tag"><i class="im im-icon-Chef-Hat"></i> {{item.categoryMain.name}}</span> {% if item.featureAddNumber > 0 %}<span class="featured_tag">{% trans "Featured" %}</span>{% endif %}
          <span class="utf_open_now">{% trans "Open Now" %}</span>
          <div class="utf_listing_item_content">
            <div class="utf_listing_prige_block">	
                          {% if item.price != None %}						
            <span class="utf_meta_listing_price"><i class="fa fa-tag"></i> {{item.price}}</span>							
            <span class="utp_approve_item"><i class="utf_approve_listing"></i></span>
                          {% endif %}
          </div>
          <h3>{{item.name}}</h3>
          <span><i class="sl sl-icon-location"></i> {{item.owner.address}}</span>
          <!-- <span><i class="sl sl-icon-phone"></i> {{item.owner.phone}}</span>											 -->
          </div>					  
        </div>
        <div class="utf_star_rating_section" data-rating="{{item.avg_ratings}}">
          <div class="utf_counter_star_rating">({{item.avg_ratings}})</div>
        </div>
        </a> 
        </div>
        {% endfor %}
        
      </div>
      </div>
    </div>
   </div>
  </div>
</section>







{% endblock %}




{% block "javascriptOfPage" %}


<script>
  var typed = new Typed('.typed-words', {
  strings: [' {% trans "Needs" %} ',' {% trans "Concerns" %} ',' {% trans "Services" %} '],
    typeSpeed: 80,
    backSpeed: 80,
    backDelay: 4000,
    startDelay: 1000,
    loop: true,
    showCursor: true
  });
  
  
      
  getlistOfcities();
  getListOfRegions("");
  $('select').selectpicker('refresh');
  </script>
  
<script>
$('#dropdownMenuLink').on('change', function() {
            
            fill_categoryAndSelect(false);
          
            });

  
function fill_categoryAndSelect(isfirstTime){
          showLoader();
          $.ajax({ 
                type: 'POST',
                url: '/en/getListOfcategoriesByparentOneId',
                              data: { 
                                  'mainCategory': $('#dropdownMenuLink').val()
                  },
                headers:{
                    "X-CSRFToken": csrftoken
                        },
                async: true,
                cache: true,
                success: function(result) {
                    console.log(result)
                    
                  $('#category')
                                .find('option')
                                .remove()
                                .end()
                                .append('<option value="">{% trans "Select One" %}</option>')
                                .val('')
                                ;
        
                                var $category = $('#category');
        
                                 if(result['Result']=='Ok'){
                          console.log(result)
                                  result.data.forEach(element => {
                                    $category.append($("<option />").val(element.id).text(element.name));
                                  });
                                 
                          
                                 }
        
                           
                                 $('select').selectpicker('refresh');
                    hideLoader();
                },error: function (xhr, ajaxOptions, thrownError) {
                    hideLoader();
                   }
            });
        
            hideLoader();
        }
        
      
        fill_categoryAndSelect(true);
</script>
  



<script>
  $('#home_navigation').addClass('current');
    </script>
  
{% endblock %}